# 타겟 PC에서 텍스트가 누락/깨질 때 체크리스트

증상은 다양하지만, 원인은 보통 **포커스**, **타이핑 속도(타이밍)**, **IME/입력기**, **앱 자동기능** 4개 축으로 수렴합니다.

## 0) 먼저 “전송 문제 vs 입력 문제”를 분리하기
- **전송 문제(웹→BLE)**: 장치 연결이 끊기거나, 재전송/재시도로 진행률이 멈춤.
- **입력 문제(USB HID→Target PC)**: 전송은 끝났는데 결과 텍스트가 누락/깨짐.

대부분은 “입력 문제”입니다.

## 1) 포커스/환경 체크 (가장 흔한 원인)
- [ ] Start 직전에 Target PC의 입력 위치(커서)를 다시 확인했다
- [ ] 실행 중 마우스/키보드를 건드리지 않았다
- [ ] 알림/팝업/업데이트/백신 알림이 포커스를 뺏지 않도록 껐다
- [ ] 화면 보호기/절전/자동 잠금을 껐다
- [ ] 원격 데스크톱/가상화 환경이면 키 입력 누락이 더 흔함(딜레이를 크게)

## 2) 타이핑 속도(딜레이) 조정
증상별로 아래를 우선 조정하세요.

### Q. 글자가 가끔씩 빠진다(누락)
- `typingDelayMs`를 먼저 올립니다. (예: 30 → 60 → 100)
- 그래도 안 되면 `keyPressDelayMs`도 올립니다. (예: 10 → 20)

### Q. 엔터/탭/특수키 주변에서 깨진다
- `keyPressDelayMs`를 올려 “눌림 유지”를 늘립니다.
- 콘솔(터미널)이라면 `typingDelayMs`도 함께 올립니다.

### Q. Pause/Stop이 늦게 먹는다
- 장치 버퍼가 꽉 찼을 수 있습니다.
- 웹 전송 설정(청크/딜레이)을 보수적으로 조정하고, 긴 작업은 중간 점검을 권장합니다.

## 3) 앱 자동 기능 제거(IDE/에디터 영향)
다음 기능은 “입력 변형”을 만들 수 있습니다.

- 자동 완성/자동 수정/자동 괄호 닫기
- 자동 들여쓰기/스마트 인덴트
- 저장 시 자동 포맷(Formatter)

권장 디버깅 순서:
1) 메모장/단순 텍스트 에디터에서 100% 성공 확인
2) 그 다음 IDE로 옮기고, IDE 자동기능을 하나씩 끄면서 비교

## 4) IME(한글/한영 전환) 이슈
- 시작 전에 Target PC 입력기를 **영문 상태**로 맞춥니다(초기 동기화는 보장 어려움).
- 한/영 전환키가 환경과 맞는지 확인합니다(예: Windows는 Right Alt를 쓰는 경우가 많음).
- `modeSwitchDelayMs`를 늘려 토글 직후 안정화 시간을 줍니다.

### Q. 한글이 ‘깨지거나’ 중간 조합이 틀어진다
- `modeSwitchDelayMs`를 크게 올려봅니다(예: 100 → 300 → 800).
- 아주 긴 한글 텍스트는 “중간에 영문/한글 모드가 뒤집히는” 누적 이슈가 생길 수 있어, 작업을 분할하는 것이 유리합니다.

## 5) 빠른 재현/진단 팁
- 문제 재현 텍스트를 최소화하세요(10줄만으로도 재현되게).
- 동일 텍스트로 3회 반복해 **확률 문제인지** 확인하세요.
- 로그/진단이 가능한 경우(파일 플러시의 경우) targetDir 아래 `.tmp` 로그를 확인하세요.

## 6) “이건 거의 100% 환경 문제” 신호
- 입력이 다른 창에 섞여 들어간다 → 포커스 문제
- 특정 앱/특정 입력창에서만 실패한다 → 앱 자동기능/권한/UAC
- RDP/VM에서만 실패한다 → 타이핑 딜레이/키 유지시간 부족
