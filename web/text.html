<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ByteFlusher â€” Text Flush (BLE to USB HID automatic typing)</title>
    <meta
      name="description"
      content="ByteFlusher Text Flush: Send text via Web Bluetooth (BLE) and the nRF52840 board types it accurately on the Target PC as USB HID keyboard input. Accuracy-first (no drops/duplicates, instant Pause/Stop)."
    />

    <link rel="icon" href="../favicon.svg" type="image/svg+xml" />
    <link rel="icon" href="../favicon.svg" sizes="any" />

    <link rel="canonical" href="https://aidanpark.github.io/byteflusher/web/text.html" />

    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="ByteFlusher" />
    <meta property="og:title" content="ByteFlusher â€” Text Flush" />
    <meta
      property="og:description"
      content="Send text via Web Bluetooth (BLE) â†’ USB HID keyboard auto-typing on Target PC (accuracy-first)."
    />
    <meta property="og:url" content="https://aidanpark.github.io/byteflusher/web/text.html" />
    <meta property="og:image" content="https://aidanpark.github.io/byteflusher/docs/ui_text_preview.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ByteFlusher â€” Text Flush" />
    <meta
      name="twitter:description"
      content="BLE (Web Bluetooth) â†’ nRF52840 â†’ USB HID keyboard. Accuracy-first automatic text input."
    />
    <meta name="twitter:image" content="https://aidanpark.github.io/byteflusher/docs/ui_text_preview.png" />

    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <main class="container">
      <header class="topHeader">
        <h1><a href="../index.html" style="color: inherit; text-decoration: none;">ðŸ¤– Byte Flusher - Text ðŸ“„</a></h1>
        <p class="muted" style="margin-top: 8px; font-size: 14px; line-height: 1.5;">
          <a href="../index.html" style="color: inherit;">Home</a>
          Â· <a href="./files.html" style="color: inherit;">File Flush</a>
          Â· <a href="../docs/" style="color: inherit;">Docs</a>
          Â· <a href="https://github.com/AidanPark/byteflusher" rel="noopener" target="_blank" style="color: inherit;">GitHub</a>
          Â· <a href="https://github.com/AidanPark/byteflusher#-ë¹ ë¥¸-ì‹œìž‘-ì‚¬ìš©-ë°©ë²•" rel="noopener" target="_blank" style="color: inherit;">Usage</a>
        </p>
      </header>

      <div class="layout">
        <aside class="sidebar">
          <section class="card">
            <div class="cardHeaderRow">
              <h2 class="sidebarTitle" style="margin: 0;" data-i18n="common.device">Device</h2>
            </div>
            <fieldset id="deviceFieldset">
              <div class="row">
                <button id="btnConnect" class="primary" data-i18n="common.connect">Connect Device</button>
                <button id="btnDisconnect" disabled data-i18n="common.disconnect">Disconnect</button>
                <button id="btnBootloader" class="danger" disabled data-i18n="common.bootloader">Enter Bootloader</button>
              </div>

              <div class="grid2" style="margin-top: 10px;">
                <label class="inline" style="width: 100%; justify-content: space-between;">
                  <span data-i18n="common.nickname">Nickname</span>
                  <input id="deviceNickname" class="textField" type="text" maxlength="12" placeholder="e.g. aidan" data-i18n-placeholder="common.nicknamePlaceholderText" />
                </label>
                <p class="muted small" style="margin: -2px 0 0;" data-i18n="common.nicknameHint">
                  Saved to board; reflected in advertising name (alphanumeric/-/_).
                </p>
              </div>

              <div class="row" style="margin-top: 8px;">
                <button id="btnApplyNickname" type="button" disabled data-i18n="common.saveNickname">Save Nickname</button>
              </div>
            </fieldset>
            <div class="status">
              <div><span class="label" data-i18n="common.status">Status</span> <span id="statusText" data-i18n="status.disconnected">Disconnected</span></div>
              <div class="muted small" id="detailsText"></div>
            </div>
          </section>

          <section class="card">
            <h2 class="sidebarTitle" data-i18n="common.cautions">Cautions</h2>
            <ul class="muted small" style="margin: 0; padding-left: 18px;">
              <li data-i18n="common.cautionAuth">Intended for testing/development automation/demo purposes on systems you own/manage or in explicitly authorized environments.</li>
              <li data-i18n="common.cautionIllegal">Do not use for unauthorized access, security bypass, unauthorized input, or any illegal/unethical purpose.</li>
              <li data-i18n-html="common.cautionNoPairing">No OS pre-pairing needed; just use <b>Connect Device</b> from the browser (Chrome/Edge).</li>
              <li data-i18n="common.cautionFocus">Verify cursor/focus position on the Target PC before starting.</li>
            </ul>
          </section>

          <details class="card cardCollapsible" id="settingsCardText">
            <summary class="cardSummary">
              <span class="cardSummaryTitle" data-i18n="common.transferSettings">Transfer Settings</span>
            </summary>
            <fieldset id="settingsFieldset">
              <div class="grid2">
                <label class="inline" style="width: 100%; justify-content: space-between;">
                  <span data-i18n="settings.chunkSize">Chunk size (bytes)</span>
                  <input id="chunkSize" type="number" min="1" max="200" value="20" />
                </label>
                <p class="muted small" style="margin: -2px 0 0;" data-i18n="settings.chunkSizeHint">
                  Data size sent via BLE at once. Too large may increase failure rate.
                </p>
                <label class="inline" style="width: 100%; justify-content: space-between;">
                  <span data-i18n="settings.chunkDelay">Chunk send interval (ms)</span>
                  <input id="chunkDelay" type="number" min="0" max="200" value="30" />
                </label>
                <p class="muted small" style="margin: -2px 0 0;" data-i18n="settings.chunkDelayHint">
                  Wait time between chunks (for transfer stabilization).
                </p>
                <label class="inline" style="width: 100%; justify-content: space-between;">
                  <span data-i18n="settings.retryDelay">Retry interval (ms)</span>
                  <input id="retryDelay" type="number" min="0" max="5000" value="300" />
                </label>
                <p class="muted small" style="margin: -2px 0 0;" data-i18n="settings.retryDelayHint">
                  Wait time before reconnect/retry on disconnect or failure.
                </p>
              </div>

              <hr class="sidebarDivider" />

              <h2 class="settingsTitle" style="margin-top: 14px;" data-i18n="settings.inputSettings">Input Settings</h2>

              <div class="grid2" style="margin-top: 12px;">
                <label class="inline" style="width: 100%; justify-content: space-between;">
                  <span data-i18n="settings.toggleKey">KR/EN toggle key</span>
                  <select id="toggleKey">
                    <option value="rightAlt" data-i18n="settings.toggleKeyRightAlt">Right Alt (Windows)</option>
                    <option value="capsLock" data-i18n="settings.toggleKeyCapsLock">Caps Lock (mac)</option>
                    <option value="leftAlt" data-i18n="settings.toggleKeyLeftAlt">Left Alt</option>
                    <option value="rightCtrl" data-i18n="settings.toggleKeyRightCtrl">Right Ctrl</option>
                    <option value="leftCtrl" data-i18n="settings.toggleKeyLeftCtrl">Left Ctrl</option>
                    <option value="rightGui" data-i18n="settings.toggleKeyRightGui">Right GUI (Win/Cmd)</option>
                    <option value="leftGui" data-i18n="settings.toggleKeyLeftGui">Left GUI (Win/Cmd)</option>
                  </select>
                </label>

                <label class="inline" style="width: 100%; justify-content: space-between;">
                  <span data-i18n="settings.unsupportedReplacement">Replacement string</span>
                  <input id="unsupportedReplacement" type="text" value="[?]" maxlength="16" />
                </label>
                <p class="muted small" style="margin: 9px 0 0;" data-i18n="settings.unsupportedReplacementHint">
                  Characters not on the keyboard will be replaced with this string.
                </p>

                <label class="inline" style="width: 100%; justify-content: space-between;">
                  <span data-i18n="settings.ignoreLeadingWhitespace">Ignore leading spaces/tabs</span>
                  <input id="ignoreLeadingWhitespace" type="checkbox" />
                </label>
                <p class="muted small" style="margin: 9px 0 0;" data-i18n="settings.ignoreLeadingWhitespaceHint">
                  Leading spaces/tabs on each line will not be sent (useful for IDE auto-formatting).
                </p>

                <label class="inline" style="width: 100%; justify-content: space-between;">
                  <span data-i18n="settings.typingDelay">Key typing delay (ms)</span>
                  <input id="typingDelayMs" type="number" min="0" max="1000" value="30" />
                </label>
                <p class="muted small" style="margin: -2px 0 0;" data-i18n="settings.typingDelayHint">
                  Wait time after each keystroke. Too short may cause missed/garbled characters (especially HID/IME).
                </p>
                <label class="inline" style="width: 100%; justify-content: space-between;">
                  <span data-i18n="settings.modeSwitchDelay">KR/EN switch delay (ms)</span>
                  <input id="modeSwitchDelayMs" type="number" min="0" max="3000" value="100" />
                </label>
                <p class="muted small" style="margin: -2px 0 0;" data-i18n="settings.modeSwitchDelayHint">
                  Stabilization wait after IME toggle. Too short may cause input in the wrong mode.
                </p>
                <label class="inline" style="width: 100%; justify-content: space-between;">
                  <span data-i18n="settings.keyPressDelay">Key press hold (ms)</span>
                  <input id="keyPressDelayMs" type="number" min="0" max="300" value="10" />
                </label>
                <p class="muted small" style="margin: -2px 0 0;" data-i18n="settings.keyPressDelayHint">
                  How long a key is held down. Too short may not register in some environments.
                </p>
              </div>
              <p class="muted small" style="margin: 9px 0 0;" data-i18n="settings.timingNote">
                These values affect the actual typing speed/stability on the board (USB HID).
              </p>

              <div class="row" style="margin-top: 12px;">
                <button id="btnApplyDeviceSettings" class="primary" disabled data-i18n="common.applySettings">Apply Settings</button>
                <button id="btnResetSettings" data-i18n="common.resetSettings">Reset Settings</button>
                <span id="textSettingsToast" class="muted small settingsToast" aria-live="polite"></span>
              </div>
            </fieldset>
          </details>

          <section class="card">
            <h2 class="sidebarTitle" data-i18n="common.notes">Notes</h2>
            <div class="muted small" style="margin: 0 0 10px 0;">
              <div style="font-weight: 600; margin-bottom: 4px;" data-i18n="text.procedureSummaryTitle">Execution procedure (summary)</div>
              <div data-i18n="text.procedureSummary">
                Text preprocessing (replacement/whitespace options) â†’ BLE packet splitting (chunks) â†’ Start â†’ (optional) device timing settings â†’ chunk transmission loop (writeValue) â†’ device (USB HID) types â†’ complete (Stop/done)
              </div>
              <div style="margin-top: 6px;" data-i18n="text.metricsNote">
                Metric meanings: ETA/Basis are values calculated from input/settings (previewable), Progress is an approximation based on sent bytes ratio, Start/Elapsed/End are wall-clock based.
              </div>
            </div>
            <ul class="muted small" style="margin: 0; padding-left: 18px;">
              <li data-i18n="text.noteBluetooth">Web Bluetooth only works in Chrome/Edge.</li>
              <li data-i18n="text.noteUSB">Target PC must allow USB keyboard devices.</li>
              <li data-i18n="text.noteFocusStart">Place the cursor at the target input position on the Target PC before starting (Flush).</li>
              <li data-i18n-html="text.cautionEnglishMode">Set Target PC input method to <b>English mode</b> before starting (automatic KR/EN sync is not guaranteed).</li>
              <li data-i18n="text.noteBLESplit">BLE transfers have length limits and are split by default.</li>
            </ul>
          </section>
        </aside>

        <section class="main">
          <section class="card">
            <label for="textInput" class="label" data-i18n="text.flushLabel">Flush Text</label>
            <textarea id="textInput" rows="28" placeholder="Text entered here will be typed on the Target PC." data-i18n-placeholder="text.textareaPlaceholder"></textarea>

            <div class="row" style="margin-top: 24px;">
              <button id="btnStart" class="primary controlButton" disabled data-i18n="common.startText">Start (Text)</button>
              <button id="btnPause" class="controlButton" disabled data-i18n="common.pause">Pause</button>
              <button id="btnResume" class="controlButton" disabled data-i18n="common.resume">Resume</button>
              <button id="btnStop" class="danger controlButton" disabled data-i18n="common.stop">Stop</button>
            </div>

            <div class="muted small" id="startHintText" style="margin-top: 8px;"></div>
            <div class="muted small" id="startChecklistText" style="margin-top: 6px; white-space: pre-wrap;"></div>

            <div id="jobMetrics" class="jobMetrics" aria-live="polite" style="margin-top: 10px;">
              <div class="jobLine">
                <span class="jobKey" data-i18n="metric.estimate">ETA</span>
                <span id="etaText" class="muted small">-</span>
              </div>
              <div class="jobLine">
                <span class="jobKey" data-i18n="metric.startTime">Start</span>
                <span id="startTimeText" class="muted small">-</span>
              </div>
              <div class="jobLine">
                <span class="jobKey" data-i18n="metric.bytes">Bytes</span>
                <span id="totalBytesText" class="muted small">-</span>
              </div>
              <div class="jobLine">
                <span class="jobKey" data-i18n="metric.stage">Stage</span>
                <span id="stageText" class="muted small">-</span>
              </div>
              <div class="jobLine">
                <span class="jobKey" data-i18n="metric.elapsed">Elapsed</span>
                <span id="elapsedText" class="muted small">-</span>
              </div>
              <div class="jobLine">
                <span class="jobKey" data-i18n="metric.progress">Progress</span>
                <span id="progressText" class="muted small">-</span>
              </div>
              <div class="jobLine">
                <span class="jobKey" data-i18n="metric.endTime">End</span>
                <span id="endTimeText" class="muted small">-</span>
              </div>
              <div class="jobLine jobLineWide">
                <span class="jobKey" data-i18n="metric.basis">Basis</span>
                <span id="estimateBasisText" class="muted small">-</span>
              </div>
            </div>

          </section>
        </section>
      </div>
    </main>

    <script type="module" src="./text.js"></script>
  </body>
</html>
